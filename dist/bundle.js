(()=>{const e=document.querySelector("#submit"),t=document.querySelector("#book-list"),n=document.querySelector("#popup"),o=document.querySelector("#book-desc"),s=document.querySelector("BODY"),r=document.querySelector("#description-shadow"),c=document.querySelector("#title"),i=document.querySelector("#textbox");async function a(e){let s=await fetch(`https://openlibrary.org${e}.json`),r=await s.json();console.log(r),o.innerHTML=`\n        <img src="src/x-icon.png" class="close" onclick="closePopUp()">\n        <h2>${r.title}</h2>\n        <p>${r.description?.value||r.description||"Description not available."}</p>`,n.className="popup",c.classList.add("opacity"),i.classList.add("opacity"),t.classList.add("invisible")}e.addEventListener("click",(function(e){const n=document.querySelector("#input").value.toLowerCase();e.preventDefault();const o=document.querySelector("#loading");o.style.display="block";const s=document.querySelector("#warning-element");s.textContent="",s.classList.remove("warning-message"),async function(){t.innerHTML="";let e=await fetch(`https://openlibrary.org/subjects/${n}.json`);if(!e.ok)throw new Error("Error fetching data.");let o=await e.json();if(0===o.works.length)throw new Error("Error fetching works.");for(let e=0;e<o.works.length;e++){const n=document.createElement("div");n.innerHTML=`\n                <img class="image-item" src="https://covers.openlibrary.org/b/id/${o.works[e].cover_id}-M.jpg?default=false">\n                <span class="span-item" id="my-span">${o.works[e].title}</span>\n                <span class="author">${o.works[e].authors[0].name}</span>`,n.classList.add("container-item"),t.append(n),r.remove()}return o.works}().then((e=>{!function(e){let t=e.map((e=>e.key));const n=document.querySelectorAll(".span-item");for(let o=0;o<e.length;o++){const e=n[o],s=t[o];e.addEventListener("click",(()=>{a(s)}))}}(e)})).catch((e=>(console.log(e),s.textContent="Error fetching data. Please try again later.",s.classList.add("warning-message"),t.innerHTML="",[]))).finally((()=>o.style.display="none"))})),s.addEventListener("click",(function(){o.innerHTML="",n.classList.remove("popup"),c.classList.remove("opacity"),i.classList.remove("opacity"),t.classList.remove("invisible")}))})();